PUBLIC_HEADERS = [
    "webrtc/common_audio/signal_processing/include/real_fft.h",
    "webrtc/common_audio/signal_processing/include/signal_processing_library.h",
    "webrtc/common_audio/signal_processing/include/spl_inl.h",
    "webrtc/common_audio/vad/include/webrtc_vad.h",
]

cc_library(
    name = "webrtcvad",
    srcs = [
        "webrtc/common_audio/signal_processing/complex_bit_reverse.c",
        "webrtc/common_audio/signal_processing/complex_fft.c",
        "webrtc/common_audio/signal_processing/complex_fft_tables.h",
        "webrtc/common_audio/signal_processing/cross_correlation.c",
        "webrtc/common_audio/signal_processing/division_operations.c",
        "webrtc/common_audio/signal_processing/downsample_fast.c",
        "webrtc/common_audio/signal_processing/energy.c",
        "webrtc/common_audio/signal_processing/get_scaling_square.c",
        "webrtc/common_audio/signal_processing/min_max_operations.c",
        "webrtc/common_audio/signal_processing/real_fft.c",
        "webrtc/common_audio/signal_processing/resample_48khz.c",
        "webrtc/common_audio/signal_processing/resample_by_2_internal.c",
        "webrtc/common_audio/signal_processing/resample_by_2_internal.h",
        "webrtc/common_audio/signal_processing/resample_fractional.c",
        "webrtc/common_audio/signal_processing/spl_init.c",
        "webrtc/common_audio/signal_processing/vector_scaling_operations.c",
        "webrtc/common_audio/vad/vad_core.c",
        "webrtc/common_audio/vad/vad_core.h",
        "webrtc/common_audio/vad/vad_filterbank.c",
        "webrtc/common_audio/vad/vad_filterbank.h",
        "webrtc/common_audio/vad/vad_gmm.c",
        "webrtc/common_audio/vad/vad_gmm.h",
        "webrtc/common_audio/vad/vad_sp.c",
        "webrtc/common_audio/vad/vad_sp.h",
        "webrtc/common_audio/vad/webrtc_vad.c",
        "webrtc/system_wrappers/interface/cpu_features_wrapper.h",
        "webrtc/typedefs.h",
    ],
    hdrs = PUBLIC_HEADERS,
    defines = ["WEBRTC_POSIX"],
    includes = ["."],
    linkopts = ["-lpthread"],
    linkstatic = True,
    visibility = ["//visibility:public"],
)
